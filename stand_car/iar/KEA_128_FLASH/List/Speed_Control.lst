###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.2.8542/W32 for ARM        28/Sep/2018  18:58:06
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\user\C\Speed_Control.c
#    Command line =  
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\user\C\Speed_Control.c -D IAR
#        -D TWR_K60N512 -D _DLIB_FILE_DESCRIPTOR -D DA_OLED -lCN
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\KEA_128_FLASH\List\ -lB
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\KEA_128_FLASH\List\ -o
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\KEA_128_FLASH\Obj\
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M0+ -e --fpu=None --dlib_config
#        F:\IAR安装包\arm\INC\c\DLib_Config_Normal.h -I
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\..\device\H\ -I
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\..\user\H\ -I
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\..\system\ -I
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\..\lib\H\ -I
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\..\system\coreSupport\
#        -Ol
#    List file    =  
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\KEA_128_FLASH\List\Speed_Control.lst
#    Object file  =  
#        I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\iar\KEA_128_FLASH\Obj\Speed_Control.o
#
###############################################################################

I:\电磁程序-ZS\电磁直立-ZS\stand_ZS_9.28\user\C\Speed_Control.c
      1          #include "Speed_Control.h"
      2          
      3          //---------------------------------速度控制-------------------------------------

   \                                 In section .bss, align 4
      4          float speed_measure = 0,speed_L = 0,speed_R = 0,Set_Speed = 3.0,speed_car = 0;
   \                     speed_measure:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     speed_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     speed_R:
   \   00000000                      DS8 4

   \                                 In section .data, align 4
   \                     Set_Speed:
   \   00000000   0x40400000         DC32 40400000H

   \                                 In section .bss, align 4
   \                     speed_car:
   \   00000000                      DS8 4
      5          //float carSpeedTemp = 0;

   \                                 In section .bss, align 4
      6          signed int Pulse_L=0,Pulse_R=0;
   \                     Pulse_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Pulse_R:
   \   00000000                      DS8 4

   \                                 In section .data, align 4
      7          float P_Speed = 15.0,I_Speed = 1;
   \                     P_Speed:
   \   00000000   0x41700000         DC32 41700000H

   \                                 In section .data, align 4
   \                     I_Speed:
   \   00000000   0x3F800000         DC32 3F800000H
      8          //4,0

   \                                 In section .bss, align 4
      9          float E_speed = 0.0;
   \                     E_speed:
   \   00000000                      DS8 4

   \                                 In section .data, align 4
     10          float Speed_I_lntegral = 7000;
   \                     Speed_I_lntegral:
   \   00000000   0x45DAC000         DC32 45DAC000H

   \                                 In section .data, align 4
     11          float Speed_I_lntegral_Max = 15;
   \                     Speed_I_lntegral_Max:
   \   00000000   0x41700000         DC32 41700000H

   \                                 In section .bss, align 4
     12          float Speed_Control = 0,Speed_Control_Last = 0;
   \                     Speed_Control:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_Control_Last:
   \   00000000                      DS8 4

   \                                 In section .data, align 4
     13          float Speed_Control_Max= 15;
   \                     Speed_Control_Max:
   \   00000000   0x41700000         DC32 41700000H

   \                                 In section .bss, align 4
     14          float Speed_Control_Output = 0;
   \                     Speed_Control_Output:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     15          float Speed_Control_Cha = 0;
   \                     Speed_Control_Cha:
   \   00000000                      DS8 4
     16          

   \                                 In section .data, align 4
     17          float SpeedFilterRatio = 0.85;
   \                     SpeedFilterRatio:
   \   00000000   0x3F59999A         DC32 3F59999AH

   \                                 In section .bss, align 4
     18          float speed_set = 0;
   \                     speed_set:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     19          float Speed_temp = 0;
   \                     Speed_temp:
   \   00000000                      DS8 4
     20          
     21          ////分段加速
     22          //int16 spd_move = 1000,speed_add = 580,speed_start = 540;
     23          //float P_Speed_add = 28,P_Speed_start = 28;
     24          //char speed_end = 0,speed_num = 0,car_start = 0;

   \                                 In section .bss, align 4
     25          float E_speed_L,E_speed_R,
   \                     E_speed_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     E_speed_R:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     26              Speed_I_lntegral_L,Speed_I_lntegral_R,
   \                     Speed_I_lntegral_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_I_lntegral_R:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     27                  Speed_Control_Last_L,Speed_Control_Last_R,
   \                     Speed_Control_Last_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_Control_Last_R:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     28              Speed_Control_L,Speed_Control_R,
   \                     Speed_Control_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_Control_R:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     29                Speed_Control_Cha_L,Speed_Control_Cha_R,
   \                     Speed_Control_Cha_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_Control_Cha_R:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     30                  Speed_Control_Output_L,Speed_Control_Output_R;
   \                     Speed_Control_Output_L:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     Speed_Control_Output_R:
   \   00000000                      DS8 4
     31          /**
     32            * 简介
     33            *     分时复用两路测速
     34            * 注意
     35            */

   \                                 In section .text, align 2, keep-with-next
     36          void Get_CarSpeed(void)
     37          {
   \                     Get_CarSpeed: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
     38              static uint8 LR_Flag = 0;
     39          
     40              LR_Flag = !LR_Flag;//分时复用测两路
   \   00000002   0x....             LDR      R0,??DataTable0
   \   00000004   0x7800             LDRB     R0,[R0, #+0]
   \   00000006   0x2800             CMP      R0,#+0
   \   00000008   0xD103             BNE      ??Get_CarSpeed_0
   \   0000000A   0x2001             MOVS     R0,#+1
   \   0000000C   0x....             LDR      R1,??DataTable0
   \   0000000E   0x7008             STRB     R0,[R1, #+0]
   \   00000010   0xE002             B        ??Get_CarSpeed_1
   \                     ??Get_CarSpeed_0: (+1)
   \   00000012   0x2000             MOVS     R0,#+0
   \   00000014   0x....             LDR      R1,??DataTable0
   \   00000016   0x7008             STRB     R0,[R1, #+0]
     41          
     42              //开通道
     43              if (LR_Flag)
   \                     ??Get_CarSpeed_1: (+1)
   \   00000018   0x....             LDR      R0,??DataTable0
   \   0000001A   0x7800             LDRB     R0,[R0, #+0]
   \   0000001C   0x2800             CMP      R0,#+0
   \   0000001E   0xD01F             BEQ      ??Get_CarSpeed_2
     44              {
     45                  speed_measure = FTM_SpeedGet(FTM_SPEED_L);//在开始右通道计数前，将左通道数读出
   \   00000020   0x2000             MOVS     R0,#+0
   \   00000022   0x.... 0x....      BL       FTM_SpeedGet
   \   00000026   0x.... 0x....      BL       __aeabi_ui2f
   \   0000002A   0x....             LDR      R1,??DataTable1
   \   0000002C   0x6008             STR      R0,[R1, #+0]
     46          //        speed_L += speed_measure;
     47          
     48                  speed_L += (speed_measure * (SPEED_DIR_L?-1:1));//正转
   \   0000002E   0x2023             MOVS     R0,#+35
   \   00000030   0x.... 0x....      BL       GpioGet
   \   00000034   0x2800             CMP      R0,#+0
   \   00000036   0xD002             BEQ      ??Get_CarSpeed_3
   \   00000038   0x2000             MOVS     R0,#+0
   \   0000003A   0x43C0             MVNS     R0,R0            ;; #-1
   \   0000003C   0xE000             B        ??Get_CarSpeed_4
   \                     ??Get_CarSpeed_3: (+1)
   \   0000003E   0x2001             MOVS     R0,#+1
   \                     ??Get_CarSpeed_4: (+1)
   \   00000040   0x.... 0x....      BL       __aeabi_i2f
   \   00000044   0x....             LDR      R1,??DataTable1
   \   00000046   0x6809             LDR      R1,[R1, #+0]
   \   00000048   0x.... 0x....      BL       __aeabi_fmul
   \   0000004C   0x....             LDR      R1,??DataTable1_1
   \   0000004E   0x6809             LDR      R1,[R1, #+0]
   \   00000050   0x.... 0x....      BL       __aeabi_fadd
   \   00000054   0x....             LDR      R1,??DataTable1_1
   \   00000056   0x6008             STR      R0,[R1, #+0]
     49           //       Pulse_L += (speed_measure * (direction_L?0:1));		//只计正转脉冲
     50                  Choose_R;//清零计数
   \   00000058   0x2001             MOVS     R0,#+1
   \   0000005A   0x.... 0x....      BL       FTM_CountClean
   \   0000005E   0xE01E             B        ??Get_CarSpeed_5
     51              }
     52              else
     53              {
     54                  speed_measure = FTM_SpeedGet(FTM_SPEED_R);
   \                     ??Get_CarSpeed_2: (+1)
   \   00000060   0x2001             MOVS     R0,#+1
   \   00000062   0x.... 0x....      BL       FTM_SpeedGet
   \   00000066   0x.... 0x....      BL       __aeabi_ui2f
   \   0000006A   0x....             LDR      R1,??DataTable1
   \   0000006C   0x6008             STR      R0,[R1, #+0]
     55           //       speed_R += speed_measure;//不检测方向
     56          
     57                  speed_R += (speed_measure * (SPEED_DIR_R?-1:1));
   \   0000006E   0x2021             MOVS     R0,#+33
   \   00000070   0x.... 0x....      BL       GpioGet
   \   00000074   0x2800             CMP      R0,#+0
   \   00000076   0xD102             BNE      ??Get_CarSpeed_6
   \   00000078   0x2000             MOVS     R0,#+0
   \   0000007A   0x43C0             MVNS     R0,R0            ;; #-1
   \   0000007C   0xE000             B        ??Get_CarSpeed_7
   \                     ??Get_CarSpeed_6: (+1)
   \   0000007E   0x2001             MOVS     R0,#+1
   \                     ??Get_CarSpeed_7: (+1)
   \   00000080   0x.... 0x....      BL       __aeabi_i2f
   \   00000084   0x....             LDR      R1,??DataTable1
   \   00000086   0x6809             LDR      R1,[R1, #+0]
   \   00000088   0x.... 0x....      BL       __aeabi_fmul
   \   0000008C   0x....             LDR      R1,??DataTable2
   \   0000008E   0x6809             LDR      R1,[R1, #+0]
   \   00000090   0x.... 0x....      BL       __aeabi_fadd
   \   00000094   0x....             LDR      R1,??DataTable2
   \   00000096   0x6008             STR      R0,[R1, #+0]
     58            //      Pulse_R += (speed_measure * (direction_R?0:1));
     59          
     60                  Choose_L;//清零计数
   \   00000098   0x2000             MOVS     R0,#+0
   \   0000009A   0x.... 0x....      BL       FTM_CountClean
     61              }
     62          }
   \                     ??Get_CarSpeed_5: (+1)
   \   0000009E   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .bss, align 1
   \                     ??LR_Flag:
   \   00000000                      DS8 1
     63          
     64          /**
     65            * 简介
     66            *     速度控制
     67            * 注意
     68            *     转换进制：脉冲数量 / (s转换 * 编码盘)
     69            *     1r大约0.19m
     70            */

   \                                 In section .text, align 2, keep-with-next
     71          void Speed_Controler(void)
     72          { 
   \                     Speed_Controler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
     73          //    speed_car = (speed_R speed_L) / (550);  //参数可调
     74              speed_car = (speed_R+speed_L) / (2);  //参数可调
   \   00000002   0x....             LDR      R0,??DataTable2
   \   00000004   0x6801             LDR      R1,[R0, #+0]
   \   00000006   0x....             LDR      R0,??DataTable1_1
   \   00000008   0x6800             LDR      R0,[R0, #+0]
   \   0000000A   0x.... 0x....      BL       __aeabi_fadd
   \   0000000E   0x2180             MOVS     R1,#+128
   \   00000010   0x05C9             LSLS     R1,R1,#+23       ;; #+1073741824
   \   00000012   0x.... 0x....      BL       __aeabi_fdiv
   \   00000016   0x....             LDR      R1,??DataTable2_1
   \   00000018   0x6008             STR      R0,[R1, #+0]
     75                  speed_R = 0;
   \   0000001A   0x2000             MOVS     R0,#+0
   \   0000001C   0x....             LDR      R1,??DataTable2
   \   0000001E   0x6008             STR      R0,[R1, #+0]
     76              speed_L = 0;
   \   00000020   0x2000             MOVS     R0,#+0
   \   00000022   0x....             LDR      R1,??DataTable1_1
   \   00000024   0x6008             STR      R0,[R1, #+0]
     77              
     78          //    carSpeedTemp = 0.19*(speed_car*1000) / (50*OPTICAL_ENCODE_CONSTANT);//转换进制,m/s
     79          //    UART_SendFloat(carSpeedTemp, 1);
     80              if(RUN_flag == 1)Speed_temp = Set_Speed;
   \   00000026   0x....             LDR      R0,??DataTable2_2
   \   00000028   0x7800             LDRB     R0,[R0, #+0]
   \   0000002A   0x2801             CMP      R0,#+1
   \   0000002C   0xD103             BNE      ??Speed_Controler_0
   \   0000002E   0x....             LDR      R0,??DataTable2_3
   \   00000030   0x6800             LDR      R0,[R0, #+0]
   \   00000032   0x....             LDR      R1,??DataTable2_4
   \   00000034   0x6008             STR      R0,[R1, #+0]
     81              
     82              //速度滤波，防止因为速度变化过大而车身晃动
     83              
     84              Speed_temp=1;//ZS
   \                     ??Speed_Controler_0: (+1)
   \   00000036   0x20FE             MOVS     R0,#+254
   \   00000038   0x0580             LSLS     R0,R0,#+22       ;; #+1065353216
   \   0000003A   0x....             LDR      R1,??DataTable2_4
   \   0000003C   0x6008             STR      R0,[R1, #+0]
     85              
     86             
     87          //    speed_set = Speed_temp*(1-SpeedFilterRatio)+speed_set*SpeedFilterRatio;
     88          //   
     89          //   speed_set=0;
     90          //    E_speed = speed_set - speed_car;
     91              E_speed = speed_car - speed_set;
   \   0000003E   0x....             LDR      R0,??DataTable2_1
   \   00000040   0x6800             LDR      R0,[R0, #+0]
   \   00000042   0x....             LDR      R1,??DataTable2_5
   \   00000044   0x6809             LDR      R1,[R1, #+0]
   \   00000046   0x.... 0x....      BL       __aeabi_fsub
   \   0000004A   0x....             LDR      R1,??DataTable2_6
   \   0000004C   0x6008             STR      R0,[R1, #+0]
     92              
     93              E_speed_L = speed_L -speed_set ;
   \   0000004E   0x....             LDR      R0,??DataTable1_1
   \   00000050   0x6800             LDR      R0,[R0, #+0]
   \   00000052   0x....             LDR      R1,??DataTable2_5
   \   00000054   0x6809             LDR      R1,[R1, #+0]
   \   00000056   0x.... 0x....      BL       __aeabi_fsub
   \   0000005A   0x....             LDR      R1,??DataTable2_7
   \   0000005C   0x6008             STR      R0,[R1, #+0]
     94              E_speed_R = speed_R -speed_set ;
   \   0000005E   0x....             LDR      R0,??DataTable2
   \   00000060   0x6800             LDR      R0,[R0, #+0]
   \   00000062   0x....             LDR      R1,??DataTable2_5
   \   00000064   0x6809             LDR      R1,[R1, #+0]
   \   00000066   0x.... 0x....      BL       __aeabi_fsub
   \   0000006A   0x....             LDR      R1,??DataTable2_8
   \   0000006C   0x6008             STR      R0,[R1, #+0]
     95              ///起步速度与行进速度不一样
     96             
     97          //    if(car_start == 1)
     98          //    {
     99          //    if(speed_car >= spd_move && speed_end == 0)
    100          //    {
    101          //      speed_num++;
    102          //    }
    103          //    if(speed_num >= 10)
    104          //    {
    105          //      speed_num = 0;
    106          //      speed_end = 1;
    107          //    }
    108          //    if(speed_end == 1) {speed_set = speed_add;P_Speed = P_Speed_add;BUZZER_ON}
    109          //    else              {speed_set = speed_start;P_Speed = P_Speed_start;}
    110          //    }
    111          //    else speed_set = 0;
    112              
    113              
    114              Speed_I_lntegral_L += I_Speed*E_speed_L;
   \   0000006E   0x....             LDR      R0,??DataTable2_9
   \   00000070   0x6801             LDR      R1,[R0, #+0]
   \   00000072   0x....             LDR      R0,??DataTable2_7
   \   00000074   0x6800             LDR      R0,[R0, #+0]
   \   00000076   0x.... 0x....      BL       __aeabi_fmul
   \   0000007A   0x....             LDR      R1,??DataTable2_10
   \   0000007C   0x6809             LDR      R1,[R1, #+0]
   \   0000007E   0x.... 0x....      BL       __aeabi_fadd
   \   00000082   0x....             LDR      R1,??DataTable2_10
   \   00000084   0x6008             STR      R0,[R1, #+0]
    115              Speed_I_lntegral_R += I_Speed*E_speed_R;
   \   00000086   0x....             LDR      R0,??DataTable2_9
   \   00000088   0x6801             LDR      R1,[R0, #+0]
   \   0000008A   0x....             LDR      R0,??DataTable2_8
   \   0000008C   0x6800             LDR      R0,[R0, #+0]
   \   0000008E   0x.... 0x....      BL       __aeabi_fmul
   \   00000092   0x....             LDR      R1,??DataTable2_11
   \   00000094   0x6809             LDR      R1,[R1, #+0]
   \   00000096   0x.... 0x....      BL       __aeabi_fadd
   \   0000009A   0x....             LDR      R1,??DataTable2_11
   \   0000009C   0x6008             STR      R0,[R1, #+0]
    116              
    117              Speed_I_lntegral += I_Speed*E_speed;
   \   0000009E   0x....             LDR      R0,??DataTable2_9
   \   000000A0   0x6801             LDR      R1,[R0, #+0]
   \   000000A2   0x....             LDR      R0,??DataTable2_6
   \   000000A4   0x6800             LDR      R0,[R0, #+0]
   \   000000A6   0x.... 0x....      BL       __aeabi_fmul
   \   000000AA   0x....             LDR      R1,??DataTable2_12
   \   000000AC   0x6809             LDR      R1,[R1, #+0]
   \   000000AE   0x.... 0x....      BL       __aeabi_fadd
   \   000000B2   0x....             LDR      R1,??DataTable2_12
   \   000000B4   0x6008             STR      R0,[R1, #+0]
    118              
    119              
    120              if (Speed_I_lntegral < -Speed_I_lntegral_Max)
   \   000000B6   0x....             LDR      R0,??DataTable2_12
   \   000000B8   0x6800             LDR      R0,[R0, #+0]
   \   000000BA   0x....             LDR      R1,??DataTable2_13
   \   000000BC   0x6809             LDR      R1,[R1, #+0]
   \   000000BE   0x2280             MOVS     R2,#+128
   \   000000C0   0x0612             LSLS     R2,R2,#+24       ;; #-2147483648
   \   000000C2   0x4051             EORS     R1,R1,R2
   \   000000C4   0x.... 0x....      BL       __aeabi_cfcmple
   \   000000C8   0xD206             BCS      ??Speed_Controler_1
    121                  Speed_I_lntegral = -Speed_I_lntegral_Max;
   \   000000CA   0x....             LDR      R0,??DataTable2_13
   \   000000CC   0x6800             LDR      R0,[R0, #+0]
   \   000000CE   0x2180             MOVS     R1,#+128
   \   000000D0   0x0609             LSLS     R1,R1,#+24       ;; #-2147483648
   \   000000D2   0x4048             EORS     R0,R0,R1
   \   000000D4   0x....             LDR      R1,??DataTable2_12
   \   000000D6   0x6008             STR      R0,[R1, #+0]
    122              if (Speed_I_lntegral >  Speed_I_lntegral_Max)
   \                     ??Speed_Controler_1: (+1)
   \   000000D8   0x....             LDR      R0,??DataTable2_13
   \   000000DA   0x6800             LDR      R0,[R0, #+0]
   \   000000DC   0x....             LDR      R1,??DataTable2_12
   \   000000DE   0x6809             LDR      R1,[R1, #+0]
   \   000000E0   0x.... 0x....      BL       __aeabi_cfcmple
   \   000000E4   0xD203             BCS      ??Speed_Controler_2
    123                  Speed_I_lntegral =  Speed_I_lntegral_Max;
   \   000000E6   0x....             LDR      R0,??DataTable2_13
   \   000000E8   0x6800             LDR      R0,[R0, #+0]
   \   000000EA   0x....             LDR      R1,??DataTable2_12
   \   000000EC   0x6008             STR      R0,[R1, #+0]
    124              
    125              if (Speed_I_lntegral_L < -Speed_I_lntegral_Max)
   \                     ??Speed_Controler_2: (+1)
   \   000000EE   0x....             LDR      R0,??DataTable2_10
   \   000000F0   0x6800             LDR      R0,[R0, #+0]
   \   000000F2   0x....             LDR      R1,??DataTable2_13
   \   000000F4   0x6809             LDR      R1,[R1, #+0]
   \   000000F6   0x2280             MOVS     R2,#+128
   \   000000F8   0x0612             LSLS     R2,R2,#+24       ;; #-2147483648
   \   000000FA   0x4051             EORS     R1,R1,R2
   \   000000FC   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000100   0xD206             BCS      ??Speed_Controler_3
    126                  Speed_I_lntegral_L = -Speed_I_lntegral_Max;
   \   00000102   0x....             LDR      R0,??DataTable2_13
   \   00000104   0x6800             LDR      R0,[R0, #+0]
   \   00000106   0x2180             MOVS     R1,#+128
   \   00000108   0x0609             LSLS     R1,R1,#+24       ;; #-2147483648
   \   0000010A   0x4048             EORS     R0,R0,R1
   \   0000010C   0x....             LDR      R1,??DataTable2_10
   \   0000010E   0x6008             STR      R0,[R1, #+0]
    127              if (Speed_I_lntegral_L >  Speed_I_lntegral_Max)
   \                     ??Speed_Controler_3: (+1)
   \   00000110   0x....             LDR      R0,??DataTable2_13
   \   00000112   0x6800             LDR      R0,[R0, #+0]
   \   00000114   0x....             LDR      R1,??DataTable2_10
   \   00000116   0x6809             LDR      R1,[R1, #+0]
   \   00000118   0x.... 0x....      BL       __aeabi_cfcmple
   \   0000011C   0xD203             BCS      ??Speed_Controler_4
    128                  Speed_I_lntegral_L =  Speed_I_lntegral_Max;   
   \   0000011E   0x....             LDR      R0,??DataTable2_13
   \   00000120   0x6800             LDR      R0,[R0, #+0]
   \   00000122   0x....             LDR      R1,??DataTable2_10
   \   00000124   0x6008             STR      R0,[R1, #+0]
    129              
    130              if (Speed_I_lntegral_R < -Speed_I_lntegral_Max)
   \                     ??Speed_Controler_4: (+1)
   \   00000126   0x....             LDR      R0,??DataTable2_11
   \   00000128   0x6800             LDR      R0,[R0, #+0]
   \   0000012A   0x....             LDR      R1,??DataTable2_13
   \   0000012C   0x6809             LDR      R1,[R1, #+0]
   \   0000012E   0x2280             MOVS     R2,#+128
   \   00000130   0x0612             LSLS     R2,R2,#+24       ;; #-2147483648
   \   00000132   0x4051             EORS     R1,R1,R2
   \   00000134   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000138   0xD206             BCS      ??Speed_Controler_5
    131                  Speed_I_lntegral_R = -Speed_I_lntegral_Max;
   \   0000013A   0x....             LDR      R0,??DataTable2_13
   \   0000013C   0x6800             LDR      R0,[R0, #+0]
   \   0000013E   0x2180             MOVS     R1,#+128
   \   00000140   0x0609             LSLS     R1,R1,#+24       ;; #-2147483648
   \   00000142   0x4048             EORS     R0,R0,R1
   \   00000144   0x....             LDR      R1,??DataTable2_11
   \   00000146   0x6008             STR      R0,[R1, #+0]
    132              if (Speed_I_lntegral_R >  Speed_I_lntegral_Max)
   \                     ??Speed_Controler_5: (+1)
   \   00000148   0x....             LDR      R0,??DataTable2_13
   \   0000014A   0x6800             LDR      R0,[R0, #+0]
   \   0000014C   0x....             LDR      R1,??DataTable2_11
   \   0000014E   0x6809             LDR      R1,[R1, #+0]
   \   00000150   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000154   0xD203             BCS      ??Speed_Controler_6
    133                  Speed_I_lntegral_R =  Speed_I_lntegral_Max;   
   \   00000156   0x....             LDR      R0,??DataTable2_13
   \   00000158   0x6800             LDR      R0,[R0, #+0]
   \   0000015A   0x....             LDR      R1,??DataTable2_11
   \   0000015C   0x6008             STR      R0,[R1, #+0]
    134              
    135              
    136              
    137              
    138          
    139                  
    140                  
    141              Speed_Control_Last = Speed_Control;
   \                     ??Speed_Controler_6: (+1)
   \   0000015E   0x....             LDR      R0,??DataTable2_14
   \   00000160   0x6800             LDR      R0,[R0, #+0]
   \   00000162   0x....             LDR      R1,??DataTable2_15
   \   00000164   0x6008             STR      R0,[R1, #+0]
    142              
    143              Speed_Control_Last_L = Speed_Control_L;
   \   00000166   0x....             LDR      R0,??DataTable2_16
   \   00000168   0x6800             LDR      R0,[R0, #+0]
   \   0000016A   0x....             LDR      R1,??DataTable2_17
   \   0000016C   0x6008             STR      R0,[R1, #+0]
    144              Speed_Control_Last_R = Speed_Control_R;
   \   0000016E   0x....             LDR      R0,??DataTable2_18
   \   00000170   0x6800             LDR      R0,[R0, #+0]
   \   00000172   0x....             LDR      R1,??DataTable2_19
   \   00000174   0x6008             STR      R0,[R1, #+0]
    145              
    146              
    147              Speed_Control = P_Speed*E_speed + Speed_I_lntegral;
   \   00000176   0x....             LDR      R0,??DataTable2_20
   \   00000178   0x6801             LDR      R1,[R0, #+0]
   \   0000017A   0x....             LDR      R0,??DataTable2_6
   \   0000017C   0x6800             LDR      R0,[R0, #+0]
   \   0000017E   0x.... 0x....      BL       __aeabi_fmul
   \   00000182   0x....             LDR      R1,??DataTable2_12
   \   00000184   0x6809             LDR      R1,[R1, #+0]
   \   00000186   0x.... 0x....      BL       __aeabi_fadd
   \   0000018A   0x....             LDR      R1,??DataTable2_14
   \   0000018C   0x6008             STR      R0,[R1, #+0]
    148              Speed_Control_L = P_Speed*E_speed_L + Speed_I_lntegral_L;
   \   0000018E   0x....             LDR      R0,??DataTable2_20
   \   00000190   0x6801             LDR      R1,[R0, #+0]
   \   00000192   0x....             LDR      R0,??DataTable2_7
   \   00000194   0x6800             LDR      R0,[R0, #+0]
   \   00000196   0x.... 0x....      BL       __aeabi_fmul
   \   0000019A   0x....             LDR      R1,??DataTable2_10
   \   0000019C   0x6809             LDR      R1,[R1, #+0]
   \   0000019E   0x.... 0x....      BL       __aeabi_fadd
   \   000001A2   0x....             LDR      R1,??DataTable2_16
   \   000001A4   0x6008             STR      R0,[R1, #+0]
    149              Speed_Control_R = P_Speed*E_speed_R + Speed_I_lntegral_R;
   \   000001A6   0x....             LDR      R0,??DataTable2_20
   \   000001A8   0x6801             LDR      R1,[R0, #+0]
   \   000001AA   0x....             LDR      R0,??DataTable2_8
   \   000001AC   0x6800             LDR      R0,[R0, #+0]
   \   000001AE   0x.... 0x....      BL       __aeabi_fmul
   \   000001B2   0x....             LDR      R1,??DataTable2_11
   \   000001B4   0x6809             LDR      R1,[R1, #+0]
   \   000001B6   0x.... 0x....      BL       __aeabi_fadd
   \   000001BA   0x....             LDR      R1,??DataTable2_18
   \   000001BC   0x6008             STR      R0,[R1, #+0]
    150          
    151              Speed_Control_Cha = Speed_Control - Speed_Control_Last;
   \   000001BE   0x....             LDR      R0,??DataTable2_14
   \   000001C0   0x6800             LDR      R0,[R0, #+0]
   \   000001C2   0x....             LDR      R1,??DataTable2_15
   \   000001C4   0x6809             LDR      R1,[R1, #+0]
   \   000001C6   0x.... 0x....      BL       __aeabi_fsub
   \   000001CA   0x....             LDR      R1,??DataTable2_21
   \   000001CC   0x6008             STR      R0,[R1, #+0]
    152              Speed_Control_Cha_L = Speed_Control_L - Speed_Control_Last_L;
   \   000001CE   0x....             LDR      R0,??DataTable2_16
   \   000001D0   0x6800             LDR      R0,[R0, #+0]
   \   000001D2   0x....             LDR      R1,??DataTable2_17
   \   000001D4   0x6809             LDR      R1,[R1, #+0]
   \   000001D6   0x.... 0x....      BL       __aeabi_fsub
   \   000001DA   0x....             LDR      R1,??DataTable2_22
   \   000001DC   0x6008             STR      R0,[R1, #+0]
    153              Speed_Control_Cha_R = Speed_Control_R - Speed_Control_Last_R;
   \   000001DE   0x....             LDR      R0,??DataTable2_18
   \   000001E0   0x6800             LDR      R0,[R0, #+0]
   \   000001E2   0x....             LDR      R1,??DataTable2_19
   \   000001E4   0x6809             LDR      R1,[R1, #+0]
   \   000001E6   0x.... 0x....      BL       __aeabi_fsub
   \   000001EA   0x....             LDR      R1,??DataTable2_23
   \   000001EC   0x6008             STR      R0,[R1, #+0]
    154              
    155          
    156          }
   \   000001EE   0xBD01             POP      {R0,PC}          ;; return
    157          
    158          /**
    159            * 简介
    160            *     速度输出平滑函数
    161            * 说明
    162            *     将速度调整分为20个周期，防止影响稳定性
    163            */

   \                                 In section .text, align 2, keep-with-next
    164          void Speed_Controler_Output(void)
    165          {
   \                     Speed_Controler_Output: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    166            
    167              Speed_Control_Output = Speed_Control_Cha * (speed_control_period+1)/SPEED_TIME_OUT
    168                                   + Speed_Control_Last; 
   \   00000002   0x....             LDR      R0,??DataTable2_24
   \   00000004   0x7800             LDRB     R0,[R0, #+0]
   \   00000006   0x1C40             ADDS     R0,R0,#+1
   \   00000008   0x.... 0x....      BL       __aeabi_i2f
   \   0000000C   0x....             LDR      R1,??DataTable2_21
   \   0000000E   0x6809             LDR      R1,[R1, #+0]
   \   00000010   0x.... 0x....      BL       __aeabi_fmul
   \   00000014   0x....             LDR      R1,??DataTable2_25  ;; 0x41a00000
   \   00000016   0x.... 0x....      BL       __aeabi_fdiv
   \   0000001A   0x....             LDR      R1,??DataTable2_15
   \   0000001C   0x6809             LDR      R1,[R1, #+0]
   \   0000001E   0x.... 0x....      BL       __aeabi_fadd
   \   00000022   0x....             LDR      R1,??DataTable2_26
   \   00000024   0x6008             STR      R0,[R1, #+0]
    169              
    170          Speed_Control_Output_L = Speed_Control_Cha_L * (speed_control_period+1)/SPEED_TIME_OUT
    171                                   + Speed_Control_Last_L;
   \   00000026   0x....             LDR      R0,??DataTable2_24
   \   00000028   0x7800             LDRB     R0,[R0, #+0]
   \   0000002A   0x1C40             ADDS     R0,R0,#+1
   \   0000002C   0x.... 0x....      BL       __aeabi_i2f
   \   00000030   0x....             LDR      R1,??DataTable2_22
   \   00000032   0x6809             LDR      R1,[R1, #+0]
   \   00000034   0x.... 0x....      BL       __aeabi_fmul
   \   00000038   0x....             LDR      R1,??DataTable2_25  ;; 0x41a00000
   \   0000003A   0x.... 0x....      BL       __aeabi_fdiv
   \   0000003E   0x....             LDR      R1,??DataTable2_17
   \   00000040   0x6809             LDR      R1,[R1, #+0]
   \   00000042   0x.... 0x....      BL       __aeabi_fadd
   \   00000046   0x....             LDR      R1,??DataTable2_27
   \   00000048   0x6008             STR      R0,[R1, #+0]
    172          Speed_Control_Output_R = Speed_Control_Cha_R * (speed_control_period+1)/SPEED_TIME_OUT
    173                                   + Speed_Control_Last_R; 
   \   0000004A   0x....             LDR      R0,??DataTable2_24
   \   0000004C   0x7800             LDRB     R0,[R0, #+0]
   \   0000004E   0x1C40             ADDS     R0,R0,#+1
   \   00000050   0x.... 0x....      BL       __aeabi_i2f
   \   00000054   0x....             LDR      R1,??DataTable2_23
   \   00000056   0x6809             LDR      R1,[R1, #+0]
   \   00000058   0x.... 0x....      BL       __aeabi_fmul
   \   0000005C   0x....             LDR      R1,??DataTable2_25  ;; 0x41a00000
   \   0000005E   0x.... 0x....      BL       __aeabi_fdiv
   \   00000062   0x....             LDR      R1,??DataTable2_19
   \   00000064   0x6809             LDR      R1,[R1, #+0]
   \   00000066   0x.... 0x....      BL       __aeabi_fadd
   \   0000006A   0x....             LDR      R1,??DataTable2_28
   \   0000006C   0x6008             STR      R0,[R1, #+0]
    174              
    175              
    176              
    177          }
   \   0000006E   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   0x........         DC32     ??LR_Flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x........         DC32     speed_measure

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x........         DC32     speed_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0x........         DC32     speed_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \   00000000   0x........         DC32     speed_car

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \   00000000   0x........         DC32     RUN_flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \   00000000   0x........         DC32     Set_Speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_4:
   \   00000000   0x........         DC32     Speed_temp

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_5:
   \   00000000   0x........         DC32     speed_set

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_6:
   \   00000000   0x........         DC32     E_speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_7:
   \   00000000   0x........         DC32     E_speed_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_8:
   \   00000000   0x........         DC32     E_speed_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_9:
   \   00000000   0x........         DC32     I_Speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_10:
   \   00000000   0x........         DC32     Speed_I_lntegral_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_11:
   \   00000000   0x........         DC32     Speed_I_lntegral_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_12:
   \   00000000   0x........         DC32     Speed_I_lntegral

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_13:
   \   00000000   0x........         DC32     Speed_I_lntegral_Max

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_14:
   \   00000000   0x........         DC32     Speed_Control

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_15:
   \   00000000   0x........         DC32     Speed_Control_Last

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_16:
   \   00000000   0x........         DC32     Speed_Control_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_17:
   \   00000000   0x........         DC32     Speed_Control_Last_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_18:
   \   00000000   0x........         DC32     Speed_Control_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_19:
   \   00000000   0x........         DC32     Speed_Control_Last_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_20:
   \   00000000   0x........         DC32     P_Speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_21:
   \   00000000   0x........         DC32     Speed_Control_Cha

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_22:
   \   00000000   0x........         DC32     Speed_Control_Cha_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_23:
   \   00000000   0x........         DC32     Speed_Control_Cha_R

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_24:
   \   00000000   0x........         DC32     speed_control_period

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_25:
   \   00000000   0x41A00000         DC32     0x41a00000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_26:
   \   00000000   0x........         DC32     Speed_Control_Output

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_27:
   \   00000000   0x........         DC32     Speed_Control_Output_L

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_28:
   \   00000000   0x........         DC32     Speed_Control_Output_R
    178          
    179          
    180          
    181          
    182          
    183          
    184          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   Get_CarSpeed
         8   -> FTM_CountClean
         8   -> FTM_SpeedGet
         8   -> GpioGet
         8   -> __aeabi_fadd
         8   -> __aeabi_fmul
         8   -> __aeabi_i2f
         8   -> __aeabi_ui2f
       8   Speed_Controler
         8   -> __aeabi_fadd
         8   -> __aeabi_fdiv
         8   -> __aeabi_fmul
         8   -> __aeabi_fsub
         8 __aeabi_cfcmple
       8   Speed_Controler_Output
         8   -> __aeabi_fadd
         8   -> __aeabi_fdiv
         8   -> __aeabi_fmul
         8   -> __aeabi_i2f


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable0
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_10
       4  ??DataTable2_11
       4  ??DataTable2_12
       4  ??DataTable2_13
       4  ??DataTable2_14
       4  ??DataTable2_15
       4  ??DataTable2_16
       4  ??DataTable2_17
       4  ??DataTable2_18
       4  ??DataTable2_19
       4  ??DataTable2_2
       4  ??DataTable2_20
       4  ??DataTable2_21
       4  ??DataTable2_22
       4  ??DataTable2_23
       4  ??DataTable2_24
       4  ??DataTable2_25
       4  ??DataTable2_26
       4  ??DataTable2_27
       4  ??DataTable2_28
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
       4  ??DataTable2_7
       4  ??DataTable2_8
       4  ??DataTable2_9
       4  E_speed
       4  E_speed_L
       4  E_speed_R
     160  Get_CarSpeed
       4  I_Speed
       1  LR_Flag
       4  P_Speed
       4  Pulse_L
       4  Pulse_R
       4  Set_Speed
       4  SpeedFilterRatio
       4  Speed_Control
       4  Speed_Control_Cha
       4  Speed_Control_Cha_L
       4  Speed_Control_Cha_R
       4  Speed_Control_L
       4  Speed_Control_Last
       4  Speed_Control_Last_L
       4  Speed_Control_Last_R
       4  Speed_Control_Max
       4  Speed_Control_Output
       4  Speed_Control_Output_L
       4  Speed_Control_Output_R
       4  Speed_Control_R
     496  Speed_Controler
     112  Speed_Controler_Output
       4  Speed_I_lntegral
       4  Speed_I_lntegral_L
       4  Speed_I_lntegral_Max
       4  Speed_I_lntegral_R
       4  Speed_temp
       4  speed_L
       4  speed_R
       4  speed_car
       4  speed_measure
       4  speed_set

 
 101 bytes in section .bss
  28 bytes in section .data
 896 bytes in section .text
 
 896 bytes of CODE memory
 129 bytes of DATA memory

Errors: none
Warnings: none
